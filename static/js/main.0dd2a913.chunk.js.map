{"version":3,"sources":["Editor.js","useStorageState.js","TopPane.js","App.js","index.js"],"names":["Editor","props","language","editorName","value","setVal","expand","setClick","clicked","reference","className","ref","onClick","preValue","Provider","style","color","onBeforeChange","editor","data","options","mode","theme","lineWrapping","lint","lineNumbers","useStorageState","key","initialValue","prefixedKey","useState","jsonValue","localStorage","getItem","JSON","parse","setValue","useEffect","setItem","stringify","TopPane","topRef","setSrcDoc","html","setHtml","css","setCss","javascript","setJavascript","htmlexpand","setHtmlExpand","cssexpand","setCssExpand","jsexpand","setJsExpand","htmlclick","setHtmlClick","cssclick","setCssClick","jsclick","setJsClick","htmlRef","React","createRef","cssRef","jsRef","useRef","timeout","setTimeout","clearTimeout","console","log","onDoubleClick","prevalue","App","topHeight","setTopHeight","containerRef","mouseYPosition","srcDoc","current","clientHeight","flex","height","onMouseDown","e","clientY","onMouseMove","calHeight","maxWindowHeight","onMouseUp","title","sandbox","width","frameBorder","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0dd2a913.chunk.js","sourcesContent":["import { Controlled as ControllerEditor } from \"react-codemirror2\";\r\nimport 'codemirror/lib/codemirror.css'\r\nimport 'codemirror/theme/material.css'\r\nimport 'codemirror/mode/xml/xml'\r\nimport 'codemirror/mode/css/css'\r\nimport 'codemirror/mode/javascript/javascript'\r\nimport { FiMaximize, FiMinimize } from \"react-icons/fi\";\r\nimport { IconContext } from \"react-icons\"\r\n\r\nexport default function Editor(props) {\r\n    const {\r\n        language,\r\n        editorName,\r\n        value,\r\n        setVal,\r\n        expand,\r\n        setClick,\r\n        clicked,\r\n        reference\r\n    } = props\r\n\r\n    function handleChange(editor, data, value) {\r\n        setVal(value)\r\n    }\r\n\r\n    function clickChange(){\r\n        setClick(preValue => !preValue)\r\n    }\r\n\r\n    return (\r\n        <div className={`code-editor ${expand ? '' : 'collapsed'}`} ref={reference}>\r\n            <div className=\"title\">\r\n                {expand?editorName:''}\r\n                <button className=\"max-button\" onClick={() => clickChange()}>\r\n                    <IconContext.Provider value={{ style: { color: \"#FFF\" } }}>\r\n                    {!clicked?<FiMaximize />:<FiMinimize/>}\r\n                    </IconContext.Provider>\r\n                </button>\r\n\r\n            </div>\r\n            <ControllerEditor\r\n                value={value}\r\n                onBeforeChange={handleChange}\r\n                className=\"code-mirror-wrapper\"\r\n                options={{\r\n                    mode: language,\r\n                    theme: 'material',\r\n                    lineWrapping: true,\r\n                    lint: true,\r\n                    lineNumbers: true\r\n                }}\r\n            />\r\n        </div>\r\n    )\r\n\r\n}","import { useEffect, useState } from \"react\";\r\n\r\nconst PREFIX_CP = \"cp-\"\r\n\r\nexport default function useStorageState(key,initialValue){\r\n    const prefixedKey = PREFIX_CP + key;\r\n    const [value, setValue] = useState(()=>{\r\n        const jsonValue = localStorage.getItem(prefixedKey)\r\n        if(jsonValue!=null) return JSON.parse(jsonValue)\r\n\r\n        if(typeof initialValue == 'function'){\r\n            return initialValue()\r\n        }else{\r\n            return initialValue\r\n        }\r\n    })\r\n\r\n    useEffect(()=>{\r\n        localStorage.setItem(prefixedKey,JSON.stringify(value))\r\n    },[prefixedKey,value])\r\n\r\n    return [value,setValue]\r\n}","import Editor from \"./Editor\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport useStorageState from \"./useStorageState\";\r\n\r\nexport default function TopPane(props) {\r\n  const { topRef, setSrcDoc } = props;\r\n  const [html, setHtml] = useStorageState('html',\"\")\r\n  const [css, setCss] = useStorageState('css',\"\")\r\n  const [javascript, setJavascript] = useStorageState('js',\"\")\r\n  const [htmlexpand, setHtmlExpand] = useState(true)\r\n  const [cssexpand, setCssExpand] = useState(true)\r\n  const [jsexpand, setJsExpand] = useState(true)\r\n  const [htmlclick, setHtmlClick] = useState(false)\r\n  const [cssclick, setCssClick] = useState(false)\r\n  const [jsclick, setJsClick] = useState(false)\r\n  const htmlRef = React.createRef()\r\n  const cssRef = React.createRef()\r\n  const jsRef = React.createRef()\r\n  const htmlRefWidth = React.useRef(null)\r\n  const [htmlWidth, setHtmlWidth] = useState('')\r\n  // useEffect(() => {\r\n  //   console.log(\"set htmlRef 1\", htmlWidth)\r\n  //   console.log(htmlRefWidth)\r\n  //   if (!htmlWidth) {\r\n  //     setHtmlWidth(htmlRef.current.clientWidth)\r\n  //     htmlRef.current.style.flex=\"none\"\r\n  //     return\r\n  //   }\r\n  //   htmlRef.current.style.width=`${htmlWidth}px`\r\n  //   console.log(\"set htmlRef\", htmlWidth)\r\n  // }, [htmlWidth, htmlRef])\r\n\r\n  // const onHtmlMoveDown = (e) => {\r\n  //   console.log(\"html down\")\r\n  //   console.log(e)\r\n  //   htmlRefWidth.current = e.clientX;\r\n  // }\r\n\r\n  // const onHtmlMouseMove = (e) => {\r\n  //   console.log(\"html move\")\r\n  //   console.log(111)\r\n  //   console.log(htmlRefWidth)\r\n  //   if (!htmlRefWidth.current) {\r\n  //     return\r\n  //   }\r\n  //   console.log(112)\r\n  //   var newHtmlWidth = htmlWidth + htmlRefWidth.current - e.clientX\r\n  //   if (newHtmlWidth < 0) {\r\n  //     setHtmlWidth(0)\r\n  //     return\r\n  //   }\r\n  //   console.log(113)\r\n  //   var maxWidth = topRef.current?.clientWidth\r\n  //   if(newHtmlWidth>=maxWidth){\r\n  //     setHtmlWidth(maxWidth)\r\n  //     return\r\n  //   }\r\n  //   setHtmlWidth(newHtmlWidth)\r\n  // }\r\n\r\n  // const onHtmlMouseUp = (e) => {\r\n  //   htmlRefWidth.current = null\r\n  // }\r\n\r\n  useEffect(() => {\r\n    const timeout = setTimeout(() => {\r\n      setSrcDoc(\r\n        `<html>\r\n            <body>${html}</body>\r\n            <style>${css}</style>\r\n            <script>${javascript}</script>\r\n          </html>`\r\n      )\r\n    }, 250)\r\n    return () => {\r\n      clearTimeout(timeout)\r\n    }\r\n  }, [html, css, javascript, setSrcDoc])\r\n\r\n  useEffect(() => {\r\n    if (htmlclick && !cssclick && !jsclick) {\r\n      setCssExpand(false)\r\n      setJsExpand(false)\r\n    } else if (!htmlclick && cssclick && !jsclick) {\r\n      setHtmlExpand(false)\r\n      setJsExpand(false)\r\n    } else if (!htmlclick && !cssclick && jsclick) {\r\n      setHtmlExpand(false)\r\n      setCssExpand(false)\r\n    } else {\r\n      setHtmlExpand(true)\r\n      setCssExpand(true)\r\n      setJsExpand(true)\r\n      setHtmlClick(false)\r\n      setCssClick(false)\r\n      setJsClick(false)\r\n    }\r\n    console.log(htmlclick, cssclick, jsclick)\r\n  }, [htmlclick, cssclick, jsclick])\r\n\r\n  return (\r\n    <div className=\"top sub-container\" ref={topRef}>\r\n      <div className=\"tap-vertical\" onDoubleClick={() => setHtmlClick(prevalue => !prevalue)}></div>\r\n      <Editor\r\n        language=\"xml\"\r\n        editorName=\"HTML\"\r\n        value={html}\r\n        setVal={setHtml}\r\n        expand={htmlexpand}\r\n        setClick={setHtmlClick}\r\n        clicked={htmlclick}\r\n        reference={htmlRef} />\r\n      <div className=\"mid-one resizer-vertical tap-vertical\" onDoubleClick={() => setCssClick(prevalue => !prevalue)}></div>\r\n      <Editor\r\n        language=\"css\"\r\n        editorName=\"CSS\"\r\n        value={css}\r\n        setVal={setCss}\r\n        expand={cssexpand}\r\n        setClick={setCssClick}\r\n        clicked={cssclick}\r\n        reference={cssRef} />\r\n      <div className=\"mid-two resizer-vertical tap-vertical\" onDoubleClick={() => setJsClick(prevalue => !prevalue)}></div>\r\n      <Editor\r\n        language=\"javascript\"\r\n        editorName=\"JS\"\r\n        value={javascript}\r\n        setVal={setJavascript}\r\n        expand={jsexpand}\r\n        setClick={setJsClick}\r\n        clicked={jsclick}\r\n        reference={jsRef} />\r\n      <div className=\"tap-vertical\" onDoubleClick={() => setJsClick(prevalue => !prevalue)}></div>\r\n    </div>\r\n  )\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport TopPane from \"./TopPane\";\r\n\r\nfunction App() {\r\n\r\n  const [topHeight, setTopHeight] = useState()\r\n  const topRef = React.createRef();\r\n  const containerRef = React.createRef();\r\n  const mouseYPosition = React.useRef(null);\r\n  const [srcDoc, setSrcDoc] = useState('')\r\n\r\n\r\n  useEffect(() => {\r\n    if (!topHeight) {\r\n      setTopHeight(topRef.current.clientHeight);\r\n      topRef.current.style.flex = \"none\";\r\n      return;\r\n    }\r\n    topRef.current.style.height = `${topHeight}px`;\r\n    console.log(\"set topRef\", topHeight)\r\n  }, [topHeight, topRef])\r\n\r\n  const onMouseDown = (e) => {\r\n    mouseYPosition.current = e.clientY\r\n    console.log(\"mouse down\", mouseYPosition.current)\r\n  }\r\n\r\n  const onMouseMove = (e) => {\r\n    console.log(\"mouse move\")\r\n    if (!mouseYPosition.current) {\r\n      return;\r\n    }\r\n    var calHeight = topHeight + e.clientY - mouseYPosition.current\r\n    mouseYPosition.current = e.clientY\r\n    if (calHeight <= 0) {\r\n      return topHeight !==0 && setTopHeight(0)\r\n    }\r\n\r\n    if (containerRef.current) {\r\n      var maxWindowHeight = containerRef.current.clientHeight\r\n      if (calHeight >= maxWindowHeight) {\r\n        return topHeight !== maxWindowHeight && setTopHeight(maxWindowHeight);\r\n      }\r\n    }\r\n    setTopHeight(calHeight)\r\n\r\n  }\r\n\r\n  const onMouseUp = (e) => {\r\n    mouseYPosition.current = null\r\n    console.log(\"mouse up\", topHeight)\r\n  }\r\n\r\n  return (\r\n    <div className=\"container\" ref={containerRef}>\r\n      <TopPane \r\n        topRef={topRef}\r\n        setSrcDoc={setSrcDoc}/>\r\n      <div className=\"resizer-horizontal\"\r\n        onMouseDown={onMouseDown} onMouseMove={onMouseMove} onMouseUp={onMouseUp}></div>\r\n      <div className=\"bottom sub-container\">\r\n        <iframe\r\n          srcDoc={srcDoc}\r\n          title=\"output\"\r\n          sandbox=\"allow-scripts\"\r\n          width=\"100%\"\r\n          height=\"100%\"\r\n          frameBorder=\"1\"\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from \"./App\"\r\nimport \"./index.css\"\r\n\r\n\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <App/>\r\n    </React.StrictMode>,\r\n    document.getElementById('app')\r\n)"],"sourceRoot":""}